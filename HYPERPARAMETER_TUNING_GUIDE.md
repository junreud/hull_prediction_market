# ğŸ¯ í•˜ì´í¼íŒŒë¼ë¯¸í„° íŠœë‹ ê°€ì´ë“œ

**ì‘ì„±ì¼**: 2025-11-18  
**ëª©ì **: Return ëª¨ë¸ íŠœë‹ ì‹œ ì–´ë–¤ ëª©í‘œ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í• ì§€ ê°€ì´ë“œ

---

## ğŸ“Š 4ê°€ì§€ íŠœë‹ ì˜µì…˜

### 1. **`objective_type='combined'`** â­ **ì¶”ì²œ!**

**ì„¤ëª…**: ICì™€ Spreadë¥¼ ë™ì‹œì— ìµœì í™”

**ëª©í‘œ í•¨ìˆ˜**:
```python
combined_score = IC + (Spread Ã— 100)
```

**ì¥ì **:
- âœ… ëŒ€íšŒ ì ìˆ˜ì™€ ê°€ì¥ ê´€ë ¨ ë†’ìŒ
- âœ… ìˆœìœ„ ì˜ˆì¸¡ë ¥(IC)ê³¼ ìˆ˜ìµì„±(Spread) ë™ì‹œ ê°œì„ 
- âœ… í•œ ë²ˆì˜ íŠœë‹ìœ¼ë¡œ ìµœì í™”
- âœ… ì‹¤ì „ì—ì„œ ê°€ì¥ ì¢‹ì€ ì„±ëŠ¥

**ë‹¨ì **:
- âš ï¸ íŠœë‹ ì‹œê°„ì´ RMSEë³´ë‹¤ ì•½ê°„ ëŠë¦¼ (20~30% ì •ë„)

**ì–¸ì œ ì‚¬ìš©**:
- **ê¸°ë³¸ ì„ íƒ** (ëŒ€ë¶€ë¶„ì˜ ê²½ìš°)
- ëŒ€íšŒ ì ìˆ˜ ì§ì ‘ ìµœì í™” ì›í•  ë•Œ
- ICì™€ Spread ë‘˜ ë‹¤ ì¤‘ìš”í•  ë•Œ

**ì˜ˆìƒ ì†Œìš” ì‹œê°„** (n_trials=50):
- ì•½ 3~4ì‹œê°„

---

### 2. **`objective_type='ic'`**

**ì„¤ëª…**: Information Coefficientë§Œ ìµœëŒ€í™”

**ëª©í‘œ í•¨ìˆ˜**:
```python
maximize IC
```

**ì¥ì **:
- âœ… ìˆœìœ„ ì˜ˆì¸¡ì— ì§‘ì¤‘
- âœ… Long-Short ì „ëµì— ìµœì 
- âœ… ì•ˆì •ì ì¸ ì„±ëŠ¥

**ë‹¨ì **:
- âš ï¸ SpreadëŠ” ë³„ë„ë¡œ í™•ì¸ í•„ìš”
- âš ï¸ ì‹¤ì œ ìˆ˜ìµì„± ë³´ì¥ ì•ˆ ë¨

**ì–¸ì œ ì‚¬ìš©**:
- ìˆœìœ„ ê¸°ë°˜ í¬íŠ¸í´ë¦¬ì˜¤ ì „ëµ
- ICë¥¼ ê·¹ëŒ€í™”í•˜ê³  ì‹¶ì„ ë•Œ

**ì˜ˆìƒ ì†Œìš” ì‹œê°„** (n_trials=50):
- ì•½ 3~4ì‹œê°„

---

### 3. **`objective_type='spread'`**

**ì„¤ëª…**: Long-Short Spreadë§Œ ìµœëŒ€í™”

**ëª©í‘œ í•¨ìˆ˜**:
```python
maximize (Top 20% Return - Bottom 20% Return)
```

**ì¥ì **:
- âœ… ì‹¤ì œ ìˆ˜ìµì„±ì— ì§‘ì¤‘
- âœ… ê±°ë˜ ì „ëµì— ì§ì ‘ ì—°ê²°

**ë‹¨ì **:
- âš ï¸ ICëŠ” ë³„ë„ë¡œ í™•ì¸ í•„ìš”
- âš ï¸ ê·¹ë‹¨ê°’ì—ë§Œ ê³¼ì í•© ê°€ëŠ¥ì„±

**ì–¸ì œ ì‚¬ìš©**:
- ìˆ˜ìµì„±ì´ ìµœìš°ì„ ì¼ ë•Œ
- ê±°ë˜ë¹„ìš©ì´ ë†’ì€ í™˜ê²½

**ì˜ˆìƒ ì†Œìš” ì‹œê°„** (n_trials=50):
- ì•½ 3~4ì‹œê°„

---

### 4. **`objective_type='rmse'`**

**ì„¤ëª…**: ì „í†µì ì¸ RMSE ìµœì†Œí™”

**ëª©í‘œ í•¨ìˆ˜**:
```python
minimize RMSE
```

**ì¥ì **:
- âœ… ê°€ì¥ ë¹ ë¦„
- âœ… ì•ˆì •ì ìœ¼ë¡œ ìˆ˜ë ´

**ë‹¨ì **:
- âŒ ëŒ€íšŒ ì ìˆ˜ì™€ ì§ì ‘ ê´€ë ¨ ì—†ìŒ
- âŒ IC/Spread ê°œì„  ë³´ì¥ ì•ˆ ë¨
- âŒ ì‹¤ì „ ì„±ëŠ¥ ì˜ˆì¸¡ ì–´ë ¤ì›€

**ì–¸ì œ ì‚¬ìš©**:
- ë¹ ë¥¸ í”„ë¡œí† íƒ€ì´í•‘
- ê¸°ë³¸ ë² ì´ìŠ¤ë¼ì¸ êµ¬ì¶•
- ì‹œê°„ì´ ë§¤ìš° ì œí•œì ì¼ ë•Œ

**ì˜ˆìƒ ì†Œìš” ì‹œê°„** (n_trials=50):
- ì•½ 2~3ì‹œê°„

---

## ğŸš€ ì‚¬ìš© ë°©ë²•

### ë°©ë²• 1: ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰

```bash
# Combined ëª¨ë“œ (ì¶”ì²œ)
python scripts/optimize_return_model.py
```

ê¸°ë³¸ê°’ì´ `objective_type='combined'`ë¡œ ì„¤ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

---

### ë°©ë²• 2: íŒŒë¼ë¯¸í„° ë³€ê²½

`scripts/optimize_return_model.py` íŒŒì¼ì˜ ë§ˆì§€ë§‰ ë¶€ë¶„:

```python
def main():
    optimizer = ReturnModelOptimizer(config_path="conf/params.yaml")
    
    results = optimizer.run_full_optimization(
        # ... ë‹¤ë¥¸ íŒŒë¼ë¯¸í„°ë“¤ ...
        
        # ì—¬ê¸°ë¥¼ ë³€ê²½!
        objective_type='combined',  # â† 'rmse', 'ic', 'spread', 'combined' ì¤‘ ì„ íƒ
        n_trials=50,
    )
```

**ì˜µì…˜ ë³€ê²½ ì˜ˆì‹œ**:

```python
# ICë§Œ ìµœì í™”
objective_type='ic'

# Spreadë§Œ ìµœì í™”
objective_type='spread'

# RMSE ìµœì í™” (ë¹ ë¥¸ í…ŒìŠ¤íŠ¸ìš©)
objective_type='rmse'
```

---

## ğŸ“Š ê²°ê³¼ í•´ì„

### Combined ëª¨ë“œ ì‹¤í–‰ ì‹œ:

```
================================================================================
Optimization Results
================================================================================

Best Score (Combined): 0.0892  â† ë†’ì„ìˆ˜ë¡ ì¢‹ìŒ
  â†’ IC: 0.0823  â† ì •ë³´ ê³„ìˆ˜
  â†’ Spread: 0.00069 (0.0690%)  â† Long-Short ìˆ˜ìµë¥ 
Best Trial: 23

Best Parameters:
  num_leaves: 45
  learning_rate: 0.0234
  ...
```

**í•´ì„**:
- **Combined Score**: IC + (Spread Ã— 100)
  - 0.08 ì´ìƒ: ì¢‹ìŒ âœ…
  - 0.10 ì´ìƒ: ë§¤ìš° ì¢‹ìŒ ğŸŒŸ
  
- **IC**: 0.0823
  - > 0.05: ìœ ì˜ë¯¸ âœ…
  - > 0.08: ìš°ìˆ˜ ğŸŒŸ
  
- **Spread**: 0.0690%
  - > 0.10%: ìˆ˜ìµ ê°€ëŠ¥ âœ…
  - > 0.20%: ì¢‹ì€ ìˆ˜ìµ ğŸŒŸ

---

## ğŸ¯ ì¶”ì²œ ì›Œí¬í”Œë¡œìš°

### Phase 1: ë¹ ë¥¸ íƒìƒ‰ (1~2ì‹œê°„)
```python
objective_type='rmse'
n_trials=20
```
â†’ ê¸°ë³¸ ì„±ëŠ¥ í™•ì¸

---

### Phase 2: ì •ë°€ ìµœì í™” (3~4ì‹œê°„) â­ **ë©”ì¸**
```python
objective_type='combined'
n_trials=50
```
â†’ ìµœì¢… ëª¨ë¸ ìƒì„±

---

### Phase 3: ì¶”ê°€ ê°œì„  (ì„ íƒ, 3~4ì‹œê°„)
```python
objective_type='ic'  # ë˜ëŠ” 'spread'
n_trials=50
```
â†’ íŠ¹ì • ì§€í‘œ ê·¹ëŒ€í™”

---

## ğŸ’¡ FAQ

### Q1: Combined vs IC/Spread ë”°ë¡œ íŠœë‹?

**A**: **Combined í•œ ë²ˆì´ë©´ ì¶©ë¶„!**

```python
# âŒ ë¹„íš¨ìœ¨ì 
1. IC ê¸°ì¤€ íŠœë‹ (50 trials, 3ì‹œê°„)
2. Spread ê¸°ì¤€ íŠœë‹ (50 trials, 3ì‹œê°„)
â†’ ì´ 6ì‹œê°„, ì–´ë–¤ ê²°ê³¼ ì“¸ì§€ ì• ë§¤

# âœ… íš¨ìœ¨ì 
1. Combined ê¸°ì¤€ íŠœë‹ (50 trials, 3ì‹œê°„)
â†’ ICì™€ Spread ë™ì‹œ ìµœì í™”
```

---

### Q2: Combinedì˜ ê°€ì¤‘ì¹˜ ì¡°ì •?

**í˜„ì¬ ì„¤ì •**:
```python
combined_score = IC + (Spread Ã— 100)
```

**ë³€ê²½í•˜ë ¤ë©´** (`src/tuner.py` ì¤„ 256):
```python
# Spread ë” ì¤‘ìš”í•˜ê²Œ
combined_score = IC + (Spread Ã— 200)  # Spread 2ë°° ê°€ì¤‘ì¹˜

# IC ë” ì¤‘ìš”í•˜ê²Œ
combined_score = (IC Ã— 2) + (Spread Ã— 100)  # IC 2ë°° ê°€ì¤‘ì¹˜
```

**ê¸°ë³¸ ê°€ì¤‘ì¹˜ê°€ ì ì ˆí•œ ì´ìœ **:
- IC ë²”ìœ„: 0 ~ 0.15
- Spread ë²”ìœ„: 0 ~ 0.003 (0.3%)
- Spread Ã— 100 = 0 ~ 0.3 (ICì™€ ë¹„ìŠ·í•œ ìŠ¤ì¼€ì¼)

---

### Q3: ì™œ RMSEëŠ” ì¶”ì²œ ì•ˆ í•˜ë‚˜ìš”?

**RMSE íŠœë‹ ì‹œ**:
```
Best RMSE: 0.0105 âœ… (ë‚®ìŒ, ì¢‹ìŒ!)

í•˜ì§€ë§Œ ì‹¤ì œ:
IC: 0.028 âŒ (ë„ˆë¬´ ë‚®ìŒ)
Spread: 0.047% âŒ (ìˆ˜ìµ ë¶ˆê°€ëŠ¥)
```

**Combined íŠœë‹ ì‹œ**:
```
Best RMSE: 0.0115 âš ï¸ (ì¡°ê¸ˆ ë†’ìŒ)

í•˜ì§€ë§Œ ì‹¤ì œ:
IC: 0.082 âœ… (ìš°ìˆ˜!)
Spread: 0.18% âœ… (ìˆ˜ìµ ê°€ëŠ¥!)
```

**ê²°ë¡ **: RMSE ë‚®ë‹¤ê³  ëŒ€íšŒ ì ìˆ˜ ë†’ì€ ê±° ì•„ë‹˜!

---

### Q4: ì‹œê°„ì´ ì—†ì„ ë•?

**Option 1: trials ì¤„ì´ê¸°**
```python
n_trials=20  # ì•½ 1.5ì‹œê°„
```

**Option 2: RMSEë¡œ ë¹ ë¥´ê²Œ**
```python
objective_type='rmse'
n_trials=30  # ì•½ 1.5ì‹œê°„
```

**Option 3: timeout ì„¤ì •**
```python
timeout=3600  # 1ì‹œê°„ ì œí•œ
```

---

## ğŸ“‹ ì²´í¬ë¦¬ìŠ¤íŠ¸

### íŠœë‹ ì „:
- [ ] í”¼ì²˜ ì—”ì§€ë‹ˆì–´ë§ ì™„ë£Œ
- [ ] í”¼ì²˜ ì„ íƒ ì™„ë£Œ (200ê°œ ë‚´ì™¸)
- [ ] ì‹œê°„ ì—¬ìœ  í™•ë³´ (3~4ì‹œê°„)

### íŠœë‹ ì¤‘:
- [ ] ë¡œê·¸ í™•ì¸ (IC/Spread ê°œì„ ë˜ëŠ”ì§€)
- [ ] Early stopping ì‘ë™ í™•ì¸
- [ ] ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì²´í¬

### íŠœë‹ í›„:
- [ ] IC > 0.05 ë‹¬ì„±
- [ ] Spread > 0.10% ë‹¬ì„±
- [ ] Combined Score > 0.08 ë‹¬ì„±
- [ ] ëª¨ë¸ ì €ì¥ í™•ì¸ (`artifacts/`)

---

## âœ… ê²°ë¡ 

### ì¶”ì²œ ì„¤ì •:

```python
# scripts/optimize_return_model.py
results = optimizer.run_full_optimization(
    # ... ë‹¤ë¥¸ ì„¤ì • ...
    
    # í•˜ì´í¼íŒŒë¼ë¯¸í„° íŠœë‹
    n_trials=50,
    objective_type='combined',  # â­ ì´ê²Œ ìµœì„ !
)
```

### ì´ìœ :
1. ICì™€ Spreadë¥¼ **ë™ì‹œì—** ìµœì í™”
2. ëŒ€íšŒ ì ìˆ˜ì™€ **ì§ì ‘ ì—°ê²°**
3. í•œ ë²ˆë§Œ ì‹¤í–‰í•˜ë©´ ë¨
4. ê°€ì¥ ì‹¤ì „ì ì¸ ê²°ê³¼

---

**ì‘ì„±ì**: AI Assistant  
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-11-18  
**ë‹¤ìŒ ì•¡ì…˜**: `python scripts/optimize_return_model.py` ì‹¤í–‰!
